var currentlySearching=false;var searchAgain=false;function performSearch(){if(!currentlySearching){currentlySearching=true}else{searchAgain=true;return}var b="";if(!($("limit_to_state").checked)){b="state=-1"}else{b="state="+$("status").value}b+="&search="+encodeURIComponent($("search").value);if($("search_in_account").checked){b+="&acc=1"}else{b+="&acc=0"}if($("search_in_email").checked){b+="&email=1"}else{b+="&email=0"}if($("search_in_char").checked){b+="&char=1"}else{b+="&char=0"}$("search_title").firstChild.setStyle({background:"transparent url("+url+"/shared/pics/ajax-loading-small-invert.gif) no-repeat scroll center center"});var a=new Ajax.Request(url+"/illarion/gmtool/ajax_search_accounts.php",{method:"post",parameters:b,evalJS:false,onComplete:function(c){var d=$("output_area");if(Object.isUndefined(c.responseXML)){addOrReplaceChild(d,document.createTextNode("Error - Invalid XML"))}else{addOrReplaceChild(d,parseResponse(c.responseXML))}currentlySearching=false;if(searchAgain){searchAgain=false;performSearch()}else{$("search_title").firstChild.setStyle({background:""})}}})}function parseResponse(g){if(g.nodeType==9){if(g.childNodes.length>0){for(var h=0;h<g.childNodes.length;h++){if(g.childNodes[h].nodeType!=10&&g.childNodes[h].nodeType!=7){return parseResponse(g.childNodes[h])}}}}else{if(g.nodeType==1){if(g.nodeName=="manyHits"){var p=0;var l=0;for(var h=0;h<g.childNodes.length;h++){if(g.childNodes[h].nodeName=="found"){p=g.childNodes[h].firstChild.nodeValue}else{if(g.childNodes[h].nodeName=="max"){l=g.childNodes[h].firstChild.nodeValue}}}if(cur_lang=="de"){return document.createTextNode(p+" von "+l+" Accounts entsprechen der Suche. Bitte gib genauere Suchparameter an.")}else{return document.createTextNode(p+" of "+l+" accounts fit the search. Please specify your search parameters more exactly.")}}else{if(g.nodeName=="nothing"){if(cur_lang=="de"){return document.createTextNode("Keine Accounts entsprechen den Suchparametern.")}else{return document.createTextNode("No accounts fit the search parameters.")}}else{if(g.nodeName=="debug"){var n="";var d="";for(var h=0;h<g.childNodes.length;h++){if(g.childNodes[h].nodeName=="text"){n=g.childNodes[h].firstChild.nodeValue}else{if(g.childNodes[h].nodeName=="info"){d=g.childNodes[h].firstChild.nodeValue}}}return document.createTextNode(n+"-"+d)}else{if(g.nodeName=="accounts"){var e=document.createElement("div");var j=0;var o=null;for(var h=0;h<g.childNodes.length;h++){if(g.childNodes[h].nodeName!="account"){continue}if(j==0){o=document.createElement("ul");o.style.cssText="float:left;margin-right:10px;"}var a="";var c="";for(var f=0;f<g.childNodes[h].childNodes.length;f++){if(g.childNodes[h].childNodes[f].nodeName=="name"){a=g.childNodes[h].childNodes[f].firstChild.nodeValue}else{if(g.childNodes[h].childNodes[f].nodeName=="id"){c=g.childNodes[h].childNodes[f].firstChild.nodeValue}}}var m=document.createElement("li");m.appendChild(document.createTextNode(c));m.appendChild(document.createTextNode(" - "));var b=document.createElement("a");b.href=url+"/illarion/gmtool/"+cur_lang+"_account.php?id="+c;b.appendChild(document.createTextNode(a));m.appendChild(b);o.appendChild(m);j++;if(j==10){e.appendChild(o);j=0}}if(j>0){e.appendChild(o)}return e}}}}}}}function clearChilds(a){if(a.hasChildNodes()){while(a.childNodes.length>=1){a.removeChild(a.firstChild)}}}function addOrReplaceChild(a,b){if(a.firstChild){a.replaceChild(b,a.firstChild)}else{a.appendChild(b)}};